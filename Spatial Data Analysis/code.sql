CREATE EXTENSION postgis;
CREATE EXTENSION postgis_topology;
--Create Table

CREATE TABLE MAPS (name varchar, geom geometry);
INSERT INTO MAPS VALUES
	('SAL','POINT(-118.2887760676731 34.019481014875694)'),
	('Doheny', 'POINT(-118.2831957516816 34.02019982181299)'),
	('Leavey', 'POINT(-118.28301640318824 34.0215179448401)'),
	
	('Grace Ford', 'POINT(-118.28747915547332 34.02094021437333)'),
	('Fertitta', 'POINT(-118.28230933978621 34.018880543962105)'),
	('SCA', 'POINT(-118.28648312218 34.023526657426025)'),
	
	('Fountain', 'POINT(-118.28530319578805 34.020204677263386)'),
	('Rose Garden', 'POINT(-118.286148152824 34.01702738277228)'),
	('USC Village', 'POINT(-118.28508553523646 34.02521897806949)'),
	
	('South Gate', 'POINT(-118.28636764711992 34.018697828791375)'),
	('North Gate 1', 'POINT(-118.28356703734494 34.02302291198786)'),
	('North Gate 2', 'POINT(-118.28711517278332 34.02496111660395)'),
	
	('Home', 'POINT(-118.28111638149088 34.025389192306335)');


SELECT name, ST_AsText(geom) FROM MAPS;

--Convex Hull
SELECT ST_AsText(ST_ConvexHull(ST_Collect(geom))) FROM MAPS;
--Output: "POLYGON((-118.286148152824 34.01702738277228,-118.2887760676731 34.019481014875694,-118.28711517278332 34.02496111660395,-118.28508553523646 34.02521897806949,-118.28111638149088 34.025389192306335,-118.28230933978621 34.018880543962105,-118.286148152824 34.01702738277228))"

--Nearest Neighbors of SAL
SELECT name, ST_Astext(geom) as location, ST_Distance(geom,'POINT(-118.28111638149088 34.025389192306335)') as distance 
FROM MAPS
WHERE name<>'SAL' 
ORDER BY ST_Distance(geom,'POINT(-118.28111638149088 34.025389192306335)') 
limit 5;
--Output: "North Gate 1" "POINT(-118.28356703734494 34.02302291198786)"
--"USC Village" "POINT(-118.28508553523646 34.02521897806949)"
--"Leavey" "POINT(-118.28301640318824 34.0215179448401)"
--"Doheny" "POINT(-118.2831957516816 34.02019982181299)"